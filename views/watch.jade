extends layout

block content
  .report
  head

    script(type="application/x-glsl" id="sky-vertex").
      varying vec2 vUV;

      void main() {
        vUV = uv;
        vec4 pos = vec4(position, 1.0);
        gl_Position = projectionMatrix * modelViewMatrix * pos;
      }

    script(type="application/x-glsl" id="sky-fragment").
      uniform sampler2D texture;
      varying vec2 vUV;

      void main() {
        vec4 sample = texture2D(texture, vUV);
        gl_FragColor = vec4(sample.xyz, sample.w);
      }

    script(type="x-shader/x-vertex" id="vertexShader")

      varying vec3 vWorldPosition;

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }

    script(type="x-shader/x-fragment" id="fragmentShader")

      uniform vec3 topColor;
      uniform vec3 bottomColor;
      uniform float offset;
      uniform float exponent;

      varying vec3 vWorldPosition;

      void main() {

        float h = normalize( vWorldPosition + offset ).y;
        gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( h, exponent ), 0.0 ) ), 1.0 );

      }


    script(src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js')
    script(src='/socket.io/socket.io.js')
    script(src='http://cdnjs.cloudflare.com/ajax/libs/three.js/r61/three.js')
    script(src='/javascripts/example-tilty.js')
    script(src='/javascripts/3ax-receiver.js')